<html>
  <head>
    <script>
      var sift = "https://siftnlp.keatext.com";
      //sift = "http://localhost:3000"
      
      function redirect_to_sift() {
        var httpRequest = new XMLHttpRequest();
        httpRequest.onreadystatechange = function (e) {
          if (e.target.response) {
            // response = {token: "mytoken"}
            var response = JSON.parse(e.target.response);
            var url = sift + "/partners/ExamplePartner/login?token=" + response.token;

            // redirect to SIFT
            location.href = url;
          }
        }
        httpRequest.open('POST', '/generate-temp-sift-token');
        httpRequest.send();
      }
      
      function log_out() {
        document.writeln("logged out.");
      }
    </script>
  </head>
  <body>
    <div>
      <p>Hello Pauline, welcome to your ExamplePartner account. What would you like to do today?</p>
      <ul>
        <li><a href="#" onclick="redirect_to_sift()">Analyze my data</a></li>
        <li><a href="#" onclick="log_out()">Log out</a></li>
      </ul>
    </div>
  </body>
</html>
